@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
}
@model ShoppingWeb.MvcClient.Controllers.ProductListViewModel


    <!-- breadcrumb part start-->
    <section class="breadcrumb_part">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="breadcrumb_iner">
                        <h2>product list</h2>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- breadcrumb part end-->
    <!-- product list part start-->
    <section class="product_list section_padding">
        <div class="container">
            <div class="row">
                <div class="col-md-4">
                    <div class="product_sidebar">

                    <form method="get" asp-controller="Product" asp-action="Index">
                        <div class="single_sedebar">
                            @* <form action="#" onsubmit="return false;"> *@
                                <input type="text"
                                       name="search"
                                       id="sidebar_search"
                                       placeholder="Search keyword"
                                       value="@Model.Search"
                                       autocomplete="off">
                                <i class="ti-search"></i>
                            @* </form> *@
                        </div>
                        <div class="single_sedebar">
                            <div class="single-element-widget mt-30">
                                <h3 class="mb-30">Category</h3>
                                <div class="default-select" id="default-select_2">
                                    <select name="category">
                                        <option value="">Select category</option>
                                        @foreach (var category in Model.Categories)
                                        {
										    <option value="@category.Id" selected="@(Model.SelectedCategory == category.Id ? true : false)">@category.Name</option>
                                        }
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="single_sedebar">
                            <div class="single-element-widget mt-30">
                                <h3 class="mb-30">Brand</h3>
                                <div class="default-select" id="default-select_2">
                                    <select name="brand">
                                        <option value="">Select brand</option>
                                        @foreach (var brand in Model.Brands)
                                        {
                                            <option value="@brand.Id" selected="@(Model.SelectedBrand == brand.Id ? true : false)">@brand.Name</option>
                                        }
                                    </select>
                                </div>
                            </div>
                        </div>
                            <button type="submit" class="genric-btn primary radius">Search</button>
                    </form>
                    </div>
                </div>
                <div class="col-md-8">
                    <div class="product_list">
                        <div class="row" id="product_grid">
                            <!-- Changed col-lg-6 col-sm-6 to col-lg-4 col-sm-6 for 3 columns -->
							@if (!Model.Success)
							{   	
								<div class="col-12">
									<div class="alert alert-danger" role="alert">
										Error : @Model.Message code @Model.ErrorCode
									</div>
                                </div>
							}

							@for (int i = 0; i < Model.Products.Count; i++)
							{
								var item = Model.Products[i];
								<div class="col-lg-4 col-sm-6 single_product_item" data-title="@item.Name">
									<img src="@item.ImageUrl" alt="#" class="img-fluid">
									<h3>
										<a href="@Url.Action("Detail", "Product", new { id = item.Id })">
											@item.Name
										</a>
									</h3>
									<p>$@item.Price</p>
                                </div>
                                }
                        </div>
                        <!-- Pagination Start -->
                        @if (Model.TotalPages > 1)
                        {
                            <nav aria-label="Page navigation" class="mt-4">
                                <ul class="pagination justify-content-center">
                                    <li class="page-item @(Model.PageIndex == 1 ? "disabled" : "")">
                                        <a class="page-link" href="@Url.Action("Index", new { page = Model.PageIndex - 1, search = Model.Search, category = Model.SelectedCategory, brand = Model.SelectedBrand })" tabindex="-1">Previous</a>
                                    </li>
                                    @for (int pageNumber = 1; pageNumber <= Model.TotalPages; pageNumber++)
                                    {
                                            <li class="page-item @(Model.PageIndex == pageNumber ? "active" : "")">
                                                <a class="page-link" href="@Url.Action("Index", new { page = pageNumber, search = Model.Search, category = Model.SelectedCategory, brand = Model.SelectedBrand })">@pageNumber </a>
                                        </li>
                                    }
                                    <li class="page-item @(Model.PageIndex == Model.TotalPages ? "disabled" : "")">
                                            <a class="page-link" href="@Url.Action("Index", new { page = Model.PageIndex + 1, search = Model.Search, category = Model.SelectedCategory, brand = Model.SelectedBrand })">Next</a>
                                    </li>
                                </ul>
                            </nav>
                        }
                        <!-- Pagination End -->
                    </div>
                </div>
            </div>
            
        </div>
    </section>
    <!-- product list part end-->

