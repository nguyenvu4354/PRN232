@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
}
@model ShoppingWeb.MvcClient.Controllers.ProductListViewModel


<body>
    <!-- breadcrumb part start-->
    <section class="breadcrumb_part">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="breadcrumb_iner">
                        <h2>product list</h2>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- breadcrumb part end-->
    <!-- product list part start-->
    <section class="product_list section_padding">
        <div class="container">
            <div class="row">
                <div class="col-md-4">
                    <div class="product_sidebar">
                        <div class="single_sedebar">
                            <form action="#" onsubmit="return false;">
                                <input type="text"
                                       name="product_search_sidebar"
                                       id="sidebar_search"
                                       placeholder="Search keyword"
                                       onchange="filterProducts()"
                                       onkeyup="filterProducts()"
                                       autocomplete="off">
                                <i class="ti-search"></i>
                            </form>
                        </div>
                        <div class="single_sedebar">
                            <div class="select_option">
                                <div class="select_option_list">Category <i class="right fas fa-caret-down"></i> </div>
                                <div class="select_option_dropdown">
                                    <p><a href="#">Category 1</a></p>
                                    <p><a href="#">Category 2</a></p>
                                    <p><a href="#">Category 3</a></p>
                                    <p><a href="#">Category 4</a></p>
                                </div>
                            </div>
                        </div>
                        <div class="single_sedebar">
                            <div class="select_option">
                                <div class="select_option_list">Type <i class="right fas fa-caret-down"></i> </div>
                                <div class="select_option_dropdown">
                                    <p><a href="#">Type 1</a></p>
                                    <p><a href="#">Type 2</a></p>
                                    <p><a href="#">Type 3</a></p>
                                    <p><a href="#">Type 4</a></p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-8">
                    <div class="product_list">
                        <div class="row" id="product_grid">
                            <!-- Changed col-lg-6 col-sm-6 to col-lg-4 col-sm-6 for 3 columns -->
							@if (!Model.Success)
							{   	
								<div class="col-12">
									<div class="alert alert-danger" role="alert">
										Error : @Model.Message code @Model.ErrorCode
									</div>
                                </div>
							}

							@for (int i = 0; i < Model.Products.Count; i++)
							{
								var item = Model.Products[i];
								<div class="col-lg-4 col-sm-6 single_product_item" data-title="@item.Name">
									<img src="@item.ImageUrl" alt="#" class="img-fluid">
									<h3>
										<a href="@Url.Action("Detail", "Product", new { id = item.Id })">
											@item.Name
										</a>
									</h3>
									<p>$@item.Price</p>
								</div>
							}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- product list part end-->
    <!-- footer part start-->
    <!-- footer part end-->
    <!-- jquery plugins here-->
    <script src="js/jquery-1.12.1.min.js"></script>
    <!-- popper js -->
    <script src="js/popper.min.js"></script>
    <!-- bootstrap js -->
    <script src="js/bootstrap.min.js"></script>
    <!-- easing js -->
    <script src="js/jquery.magnific-popup.js"></script>
    <!-- swiper js -->
    <script src="js/swiper.min.js"></script>
    <!-- swiper js -->
    <script src="js/masonry.pkgd.js"></script>
    <!-- particles js -->
    <script src="js/owl.carousel.min.js"></script>
    <script src="js/jquery.nice-select.min.js"></script>
    <!-- slick js -->
    <script src="js/slick.min.js"></script>
    <script src="js/jquery.counterup.min.js"></script>
    <script src="js/waypoints.min.js"></script>
    <!-- custom js -->
    <script src="js/custom.js"></script>

    <script>
        // Search toggle
        document.getElementById('search_1').addEventListener('click', () => {
            document.getElementById('search_input_box').style.display = 'block';
            document.getElementById('search_input').focus();
        });

        function closeSearch() {
            document.getElementById('search_input_box').style.display = 'none';
            document.getElementById('search_input').value = '';
            filterProducts();
        }

        // Filter function for demo: filters product items by matching title text with input value
        function filterProducts() {
            const searchTerm = (document.getElementById('search_input').value || document.getElementById('sidebar_search').value).toLowerCase();
            const products = document.querySelectorAll('.single_product_item');
            products.forEach(prod => {
                const title = prod.getAttribute('data-title').toLowerCase();
                if (title.includes(searchTerm)) {
                    prod.style.display = '';
                } else {
                    prod.style.display = 'none';
                }
            });
        }
    </script>
</body>

</html>
